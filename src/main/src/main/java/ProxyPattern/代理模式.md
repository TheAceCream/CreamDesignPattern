## 代理模式

### 1.意图

我们创建具有现有对象的对象，以便向外界提供功能接口。为其他对象提供一种代理以控制对这个对象的访问。

### 2.什么时候使用？

想在访问一个类时做一些控制。有些对象直接访问会很不方便。

### 3.应用

其实，提到代理就想到了。Spring的AOP面向切面编程

Mybatis也用到了代理模式。

### 4.代理

比如我现在有个Math类，他的功能是计算加、减、乘、除。我们很快就写完了。

有一天有人对我说：咱们需求改了！不单单要计算，还有输出执行计算的时间！

我就需要去在原有代码的基础上去修改，每个方法我都要修改。这里就出现了问题：

1.工作量大，我改了好多代码

2.违反开闭原则。对扩展开放，对修改关闭

3.违反单一职责。算数里面居然加了计算耗时的功能。

4.违反依赖倒转原则。抽象不应该依赖细节，两者都应该依赖抽象。这里根本没抽象，全是细节。



那么去代码里体现一下，动态代理。
动态代理分为两个：通过JDK或者CGLIB。
CGLIB相比于JDK动态代理更加强大，JDK动态代理虽然简单易用，但是其有一个致命缺陷是，只能对接口进行代理。如果要代理的类为一个普通类、没有接口，那么Java动态代理就没法使用了。